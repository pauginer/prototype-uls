<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>ULS prototype</title>
		<!--UI localisation: -->
		<link rel="localization" hreflang="en" href="lang/en.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="af" href="lang/af.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="am" href="lang/am.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="ar" href="lang/ar.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="be" href="lang/be.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="be-x-old" href="lang/be-x-old.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="bg" href="lang/bg.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="bn" href="lang/bn.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="bo" href="lang/bo.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="br" href="lang/br.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="bs" href="lang/bs.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="ca" href="lang/ca.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="cbk-zam" href="lang/cbk-zam.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="cs" href="lang/cs.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="cy" href="lang/cy.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="da" href="lang/da.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="de" href="lang/de.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="el" href="lang/el.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="et" href="lang/et.json" type="application/l10n+json"/>		
		<link rel="localization" hreflang="eo" href="lang/eo.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="eu" href="lang/eu.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="fa" href="lang/fa.json" type="application/l10n+json"/>
		
		
		<link rel="localization" hreflang="es" href="lang/es.json" type="application/l10n+json"/>
		<!-- ULS Localisation: -->
		<link rel="localization" hreflang="en" href="lang/uls/en.json" type="application/l10n+json"/>
		<link rel="localization" hreflang="es" href="lang/uls/es.json" type="application/l10n+json"/>
		
		<link href="libs/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
		<link rel="stylesheet" href="style/jquery.uls.css">
		<link rel="stylesheet" href="style/ext.uls.css">
		<link rel="stylesheet" href="style/ext.uls.languagesettings.css">
		<link rel="stylesheet" href="style/ext.uls.displaysettings.css">
		<link rel="stylesheet" href="style/ext.uls.inputsettings.css">
		<link rel="stylesheet" href="style/base.css">
		<script src="libs/jquery.js"></script>
		<script src="libs/jquery.i18n.js"></script>
		<script src="libs/bootstrap/js/bootstrap.min.js"></script>
		<script>
			var article = "lisa";
			var langs = null;
			var contentLang = "en";
			function loadArticleInfo(article) {
				$.getJSON('lang/' + article + '.json', function(data) {
					langs = data.langs;
					setArticleLang(contentLang);
					createArticleLinks();
				});

			}

			function createArticleLinks() {
				var list = $(".language-list");
				list.empty();
				langs.forEach(function(lang) {
					var item = $('<li>');
					item.text(lang.name);
					item.attr('lang', lang.code);
					item.click(interLanguageLink);
					if (contentLang != lang.code) {
						list.append(item);
					}
				});
			}

			function setArticleLang(lang) {
				var langcode = lang;
				var filename = "images/article-" + article + "-" + langcode + ".png";
				$('.article-bg').attr('src', filename);
			}

			function interLanguageLink() {
				$("body").hide();
				var elt = $(this);
				contentLang = elt.attr('lang');

				$('.language').show();
				setArticleLang(contentLang);
				createArticleLinks();
				changeUILanguage(contentLang);
				$("body").fadeIn();

			}

			function toggleLanguageSettingsDialog() {
				$('.language-settings-dialog').toggleClass('hidden');
				$(this).toggleClass('active');
			}

			function closeLanguageSettingsDialog() {
				$('.language-settings-dialog').addClass('hidden');
				$('.language-settings').removeClass('active');
			}
			function openLanguageSettingsDialog() {
				$('.language-settings-dialog').removeClass('hidden');
				$('.language-settings').addClass('active');
			}

			function showInputSettings() {
				openLanguageSettingsDialog();
				$(".uls-display-settings").addClass('hidden');
				$(".uls-input-settings").removeClass('hidden');
				$(this).addClass('active');
				$(".display-settings-block").removeClass('active');
			}
			
			function showDisplaySettings() {
				openLanguageSettingsDialog();
				$(".uls-input-settings").addClass('hidden');
				$(".uls-display-settings").removeClass('hidden');
				$(this).addClass('active');
				$(".input-settings-block").removeClass('active');
			}
			
			function changeUILanguage(lang){
				 $.i18n().locale=lang;
				 $("*[data-i18n]").each(function(i,elt){
					var key = $(elt).attr("data-i18n");
					var value = $.i18n(key);
				 	$(elt).text(value);
				 });
			}


			$(document).ready(function() {

				//Process parameters:
				
				//Create elements:
				loadArticleInfo(article);

				//Callbacks:
				$('.menu-group').click(function() {
					$(this).toggleClass('closed');
				});
				$('.language-settings').tooltip({
					'placement' : 'right',
					'delay' : {
						show : 1000,
						hide : 50
					}
				});
				$('.language-settings').click(toggleLanguageSettingsDialog);
				$('.uls-display-settings-cancel, #uls-displaysettings-apply, .icon-close').click(closeLanguageSettingsDialog);
				$(".input-settings-block").click(showInputSettings);
				$(".display-settings-block").click(showDisplaySettings);
				
				//Translate
				$(document).i18n();
			});
		</script>
	</head>
	<body>
		<div class="container">
			<div class="row">
				<div class="sidebar">
					<!-- Sidebar -->
					<div class="logo"></div>
					<div class="title" data-i18n="sitename">
						Wikipedia
					</div>
					<div class="motto" data-i18n="motto">
						The free encyclopedia
					</div>
					<div class="toolbox">
						<div class="general">
							<ul>
								<li data-i18n="n-mainpage-description">
									Main page
								</li>
								<li data-i18n="n-contents">
									Contents
								</li>
								<li data-i18n="n-featuredcontent">
									Featured content
								</li>
								<li data-i18n="n-currentevents">
									Current events
								</li>
								<li data-i18n="n-randompage">
									Random article
								</li>
								<li data-i18n="n-sitesupport">
									Donate to Wikipedia
								</li>
							</ul>
							<div class="menu-group interaction-menu" data-i18n="p-interaction">
								Interaction
							</div>
							<ul>
								<li data-i18n="n-help">
									Help
								</li>
								<li data-i18n="n-aboutsite">
									About Wikipedia
								</li>
								<li data-i18n="n-portal">
									Community portal
								</li>
								<li data-i18n="n-recentchanges">
									Recent changes
								</li>
								<li data-i18n="n-contact">
									Contact wikipedia
								</li>
							</ul>
							<div class="menu-group toolbox-menu" data-i18n="p-tb">
								Toolbox
							</div>
							<ul>
								<li data-i18n="t-whatlinkshere">
									What links here
								</li>
								<li data-i18n="t-recentchangeslinked">
									Related changes
								</li>
								<li data-i18n="n-upload">
									Upload file
								</li>
								<li data-i18n="t-specialpages">
									Special pages
								</li>
								<li data-i18n="t-permalink">
									Permanent link
								</li>
								<li data-i18n="t-info">
									Page information
								</li>
								<li data-i18n="t-cite">
									Cite this page
								</li>
							</ul>
							<div class="menu-group closed export-menu" data-i18n="p-coll-print_export">
								Print/Export
							</div>
							<ul>
								<li data-i18n="coll-create_a_book">
									Create a book
								</li>
								<li data-i18n="coll-download-as-rl">
									Download as PDF
								</li>
								<li data-i18n="t-print">
									Printable version
								</li>
							</ul>
						</div>

						<div class="languages">
							<div class="language-settings" data-toggle="tooltip" title="Language settings"></div>
							<!-- ULS -->
							<div class="uls-position">

								<div  id="language-settings-dialog" class="hidden grid uls-menu uls-wide language-settings-dialog">
									<div class="row">
										<span id="languagesettings-close" class="icon-close"></span>
									</div>
									<div class="row" id="languagesettings-panels">
										<div class="four columns languagesettings-menu">
											<h1 data-i18n="ext-uls-language-settings-title">Language settings</h1>
											<div class="settings-menu-items">
												<div class="display-settings-block menu-section active" id="display-settings-block">
													<div class="settings-title">
														Display
													</div><span class="settings-text">Set language used for menus and fonts.</span>
												</div>
												<div class="input-settings-block menu-section" id="input-settings-block">
													<div class="settings-title">
														Input
													</div><span class="settings-text">Writing in a different language?</span>
												</div>
											</div>
										</div>
										<div id="languagesettings-settings-panel" class="eight columns">
											<div class="uls-display-settings">
												<div class="row">
													<div class="twelve columns">
														<h3 data-i18n="ext-uls-display-settings-title">Display settings</h3>
													</div>
												</div>
												<div class="row">
													<div class="eleven columns">
														<h4 data-i18n="ext-uls-display-settings-ui-language">Language for display</h4>
													</div>
												</div>
												<div class="row">
													<div class="uls-ui-languages eleven columns">
														<button class="button uls-language-button down" lang="en" dir="ltr">
															English
														</button>
														<button class="button uls-language-button" lang="ca" dir="ltr">
															català
														</button>
														<button class="button uls-language-button" lang="es" dir="ltr">
															español
														</button>
														<button id="uls-more-languages" class="button">
															...
														</button>
													</div>
												</div>
												<div class="row">
													<div class="twelve columns">
														<h4 data-i18n="ext-uls-display-settings-font-settings">Font settings</h4>
													</div>
												</div>
												<div class="row">
													<div class="eleven columns">
														<label class="checkbox">
															<input type="checkbox" id="webfonts-enable-checkbox">
															<strong data-i18n="ext-uls-webfonts-settings-title">Download font when needed</strong> <span data-i18n="ext-uls-webfonts-settings-info">Webfonts will be downloaded for displaying text in special scripts.</span> <a target="_blank" href="//www.mediawiki.org/wiki/Special:MyLanguage/Help:Extension:WebFonts" data-i18n="ext-uls-webfonts-settings-info-link">More information</a></label>
													</div>
												</div>
												<div class="row uls-content-fonts" style="">
													<div class="six columns">
														<label class="uls-font-label" id="content-font-selector-label"><strong>Select font for English</strong>
															<div data-i18n="ext-uls-webfonts-select-for-content-info">
																Font used for content
															</div></label>
													</div>
													<select id="content-font-selector" class="four columns end uls-font-select">
														<option value="OpenDyslexic">OpenDyslexic</option><option value="system" selected="selected">System font</option>
													</select>
												</div>
												<div class="row uls-ui-fonts" style="display: none;">
													<div class="six columns">
														<label class="uls-font-label" id="ui-font-selector-label"></label>
													</div><select id="ui-font-selector" class="four columns end uls-font-select"></select>
												</div><div class="row"></div>
												<div class="row language-settings-buttons">
													<div class="eleven columns">
														<button class="button uls-display-settings-cancel" data-i18n="ext-uls-language-settings-cancel">
															Cancel
														</button>
														<button class="button active blue" id="uls-displaysettings-apply" data-i18n="ext-uls-language-settings-apply" disabled="">
															Apply settings
														</button>
													</div>
												</div>
											</div>
											<div class="uls-input-settings hidden"><div class="row"><div class="twelve columns"><h3 data-i18n="ext-uls-input-settings-title">Input settings</h3></div></div><div class="row uls-input-settings-languages-title" style=""><div class="eleven columns"><h4 data-i18n="ext-uls-input-settings-ui-language">Language used for writing</h4></div></div><div class="row"><div class="uls-ui-languages eleven columns" style=""><button class="button uls-language-button down" lang="en" dir="ltr">English</button><span class="uls-input-settings-caret"></span><button class="button uls-language-button" lang="ca" dir="ltr">català</button><span class="uls-input-settings-caret"></span><button class="button uls-language-button" lang="es" dir="ltr">español</button><span class="uls-input-settings-caret"></span><button id="uls-more-languages" class="button">...</button></div></div><div class="row"><div class="eleven columns uls-input-settings-inputmethods-list" style=""><h4 class="ext-uls-input-settings-imes-title">Input methods for English</h4><label for="ipa-sil" class="imelabel"><input type="radio" name="ime" id="ipa-sil" value="ipa-sil"><strong>International Phonetic Alphabet - SIL</strong><span></span></label><label for="system" class="imelabel"><input type="radio" name="ime" id="system" value="system" checked="checked"><strong>Disable input method</strong><span>Use a regular keyboard</span></label></div></div><div class="row"><div class="eleven columns button uls-input-settings-disable-info" style="display: none;"></div><div class="six columns button uls-input-settings-toggle"><button class="active green button uls-input-toggle-button">Disable input method tools</button></div></div><div class="row"></div><div class="row language-settings-buttons"><div class="eleven columns"><button class="button uls-input-settings-cancel" data-i18n="ext-uls-language-settings-cancel">Cancel</button><button class="active blue button uls-input-settings-apply" data-i18n="ext-uls-language-settings-apply">Apply settings</button></div></div></div>
										</div>
									</div>
								</div>

							</div>
							<div class="menu-group language-menu" data-i18n="p-lang">
								Languages
							</div>
							<ul class="language-list"></ul>
						</div>

					</div>

				</div>
				<div class="header">
					<!-- Headers -->
					<div class="row">
						<div class="personal">
							<div class="span2" data-i18n="pt-createaccount">
								Create account
							</div>
							<div class="span1" data-i18n="pt-login">
								Login
							</div>
						</div>
						<div class="tabs">
							<div class="tab-group">
								<div class="span1 article tab active" data-i18n="ca-nstab-main">
									Article
								</div>
								<div class="span1 talk tab" data-i18n="ca-talk">
									Talk
								</div>
							</div>
							<div class="tab-group">
								<div class="span1 read tab active" data-i18n="ca-view">
									Read
								</div>
								<div class="span2 source tab" data-i18n="ca-viewsource">
									View source
								</div>
								<div class="span2 source tab" data-i18n="ca-history">
									View history
								</div>
								<div class=" search">
									<input class="searchbox" type="text" placeholder="Search" />
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<img class="article-bg" src="images/article-lisa-en.png" width="958" height="7000"></img>
	</body>
</html>
